language: node_js
branches:
  only:
    - master
node_js:
  - 11
# Handle git submodules yourself
git:
  submodules: false
# Use sed to replace the SSH URL with the public URL, then initialize submodules
before_install:
  - git config --global user.name "Sergio Carracedo"
  - git config --global user.email "info@sergiocarracedo.es"
  - sed -i "s/__GITHUB_TOKEN__/${__GITHUB_TOKEN__}/" _config.yml
  - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
  - git submodule update --init --recursive
install:
  - yarn install
script:
  - yarn prepate-json
  - yarn build
